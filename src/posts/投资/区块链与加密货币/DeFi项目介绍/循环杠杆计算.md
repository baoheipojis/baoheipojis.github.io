# 循环杠杆计算

## 循环杠杆公式
### 理想情况
假如有价值为A的甲币，LTV为$l$($0<l<1$)，可以借出l的比例的乙币，乙币可以立刻在dex中换成甲币重新质押。忽略网络费和滑点。则最终你总资产持有甲币的价值为：
每一轮操作，甲币都增加l，那么显然是一个等比数列
$A+lA+l^2A+l^3A+...=A\frac{1-l^{n}}{1-l}$
显然$n$很大时，$l^{n}$趋近于0，因此最后的价值为
$A\frac{1}{1-l}$

直观的解释是净资产不变。举个例子。假如你现在有100u的wstETH，ltv=0.9，你抵押进去借来eth，再抵押再借，最后根据上面的公式，你的总资产是1000u的wstETH，负债是900u的eth，净资产不变，还是100u，并且依然是以wstETH的形式。
### 带网络费的情况


### 考虑抵押物和负债的价格波动
在我们的理想情况中，一旦抵押物价格下降或者负债上升，那立马就被清算了。所以我一般我们会留有一些余地。比如我们有0.8的LTV，但是实际我们只借0.5，留出一些空间给价格波动。
那么，如果我们还想要